{% extends 'Faculties/faculty-base.html' %} 
{% load static %}

{% block page_title %}Student Profiles{% endblock %}
{% block additionalLinks %}
{% endblock %}

{% block content %}
<div>
    <h1 style="margin: 0;">Student Documents</h1>
</div>
<div class="main-content-container container">
    <div class="mb-2 d-flex align-items-center container" style="max-height: 50px; width: 80%;">
        
        <input type="text" id="username-filter" class="form-control me-2" placeholder="Username">

        <select class="form-select me-2" id="type-filter">
            <option value="0">Type</option>
            {% for document_type in document_types %}
            <option value="{{document_type.pk}}">{{document_type.document_type}}</option>
            {% endfor %}
        </select>

        <select class="form-select me-2" id="extension-filter">
            <option value="0">File Extension</option>
            <option value="txt">.txt</option>
            <option value="doc">.doc</option>
            <option value="docx">.docx</option>
            <option value="odt">.odt</option>
            <option value="pdf">.pdf</option>
        </select>

        <select class="form-select me-2" id="date-filter">
            <option value="0">Date Uploaded</option>
            <option value="1">1 day ago</option>
            <option value="3">3 days ago</option>
            <option value="5">5 days ago</option>
            <option value="7">1 week ago</option>
            <option value="14">2 weeks ago</option>
            <option value="30">1 month ago</option>
        </select>

        <button id="filter-button" class="btn btn-primary">Filter</button>
    </div>
    
    <table class="table table-bordered table-striped">
        <thead class="thead-dark">
            <tr>
                <th>Student</th>
                <th>File Type</th>
                <th>File</th>
                <th>Description</th>
                <th>Comments</th>
                <th>Last Modified</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody id="document-container">
            {% for docs in documents %}
                <tr>
                    <td>{{ docs.SP.profile.user.get_full_name }}</td>
                    <td id="doc-type-{{docs.id}}" data-value="{{ docs.SD_doc_type.id }}">{{ docs.SD_doc_type }}</td>

                    {% if docs.SD_document %}
                        <td><a id="doc-file-{{docs.id}}" href="{{ docs.SD_document.url }}" target="_blank">{{ docs.SD_document }}</a></td>
                    {% else %}
                        <td>None</td>
                    {% endif %}

                    <td>{{ docs.SD_doc_type.description }}</td>
                    <td id="doc-comment-{{docs.id}}">{{ docs.SD_comment }}</td>
                    <td>{{ docs.SD_date_uploaded }}</td>
                    <td class="text-center" style="font-size: 20px;">
                        <a href="#" name="doc-edit-btn" data-bs-toggle="modal" data-bs-target="#doc-edit-form" id="doc-edit-btn-{{docs.id}}" class="text-primary mr-2"><i class='bx bx-edit'></i></a>
                        <a href="#" class="text-danger"><i class='bx bx-trash'></i></a>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <div class="modal fade" id="doc-edit-form" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
            <h1 class="modal-title fs-5">Edit Document</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form enctype="multipart/form-data">
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="documentType" class="form-label">Document Type</label>
                        <select class="form-select me-2" id="doc-edit-type">
                            <option value="0">Type</option>
                            {% for document_type in document_types %}
                            <option value="{{document_type.pk}}">{{document_type.document_type}}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="input-group mb-3">
                        <span class="input-group-text">Currently</span>
                        <div class="form-control d-flex h-auto">
                            <span class="text-break flex-grow-1"> 
                                <a id="doc-edit-file" href="" target="_blank">documents/chapter-1_1_TMwoIxY.docx</a>
                            </span>
                            <div class="mb-3 form-check">
                                <input type="checkbox" class="form-check-input" id="noFile" name="noFile">
                                <label class="form-check-label" for="noFile">Clear</label>
                            </div>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="file" class="form-label">Choose File</label>
                        <input type="file" class="form-control" name="file">
                    </div>
                    
                    <div class="mb-3">
                        <label for="comment" class="form-label">Comment</label>
                        <textarea class="form-control" rows="3" id="doc-edit-comment"></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                </div>
            </form>
        </div>
        </div>
    </div>
    
</div>


{% endblock %}


{% block additionalScripts %}
<script src="{% static 'Faculties/js/student-documents.js'%}"></script>
{% endblock %}